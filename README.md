# Handwrite Web App

A small Flask app that lets users download a handwriting template, fill it in,
upload it, and receive a custom TTF font generated by the `handwrite` package.

---

> **Made with AI** using pip module [handwrite](https://github.com/yashlamba/handwrite) 
## Project Structure

```
handwrite-app/
├── app.py
├── requirements.txt
├── template.png          ← YOU MUST ADD THIS (see below)
├── uploads/              ← auto-created, temporary PNG uploads
├── outputs/              ← auto-created, temporary TTF files
└── templates/
    ├── base.html
    ├── index.html
    ├── generate.html
    └── download.html
```

---

## System Dependencies

`handwrite` requires **fontforge** and **potrace** to be installed at the OS level.

**Ubuntu / Debian / Raspberry Pi OS:**
```bash
sudo apt update
sudo apt install fontforge potrace
```

**macOS (Homebrew):**
```bash
brew install fontforge potrace
```

---

## Setup

### 1. Clone / copy the project folder

```bash
cd handwrite-app
```

### 2. Create and activate a virtual environment

```bash
python3 -m venv venv
source venv/bin/activate      # Windows: venv\Scripts\activate
```

### 3. Install Python dependencies

```bash
pip install -r requirements.txt
```

### 4. Add your template PNG

The app serves `template.png` from the project root. This should be the
handwrite character sheet that users print and fill in.

You can generate the official template with:
```bash
handwrite --help
# or check the handwrite docs for the template generation command
```

Or place any PNG you want to serve as the template at:
```
handwrite-app/template.png
```

---

## Running Locally

```bash
source venv/bin/activate
python app.py
```

The app starts on **http://0.0.0.0:5000**

- Visit **http://localhost:5000** from the same machine
- Visit **http://<your-local-ip>:5000** from other devices on your network

To find your local IP:
```bash
# Linux / Pi
hostname -I

# macOS
ipconfig getifaddr en0
```

---

## Flow

1. **`/`** — User downloads `template.png`
2. **`/generate`** — User uploads filled PNG + enters font family/style names
3. App runs: `handwrite <upload.png> <output.ttf> --family <name> --style <style>`
4. **`/font/<job_id>`** — Download page for the generated TTF
5. **`/font/<job_id>/file`** — Serves the TTF file, then deletes it

---

## Notes

- Uploads are deleted immediately after `handwrite` runs (success or failure)
- Generated TTF files are deleted after the user downloads them
- File size is capped at 5 MB
- Font family and style inputs are sanitized (alphanumeric + spaces/hyphens/underscores only)
- `handwrite` is called via `subprocess` without `shell=True` — no shell injection risk
- The job ID in URLs is a 32-character hex string (UUID4) with strict validation

---

## Stopping the App

`Ctrl+C` in the terminal running `python app.py`.
